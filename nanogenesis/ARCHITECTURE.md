# Genesis æ ¸å¿ƒæ¶æ„çœŸç†åœ°å›¾ (The Source of Truth)

> **[GENESIS DIRECTIVE]**ï¼šæ­¤æ–‡æ¡£æ˜¯ Genesis ç³»ç»Ÿçš„ç‰©ç†æ³•åˆ™ä¸å”¯ä¸€çœŸç†ã€‚ç¦æ­¢æœªæ¥çš„ä»»ä½• AI åŠ©ç†å‡­ç©ºè„‘è¡¥ç³»ç»Ÿç»“æ„ã€‚åœ¨ä¿®æ”¹ä»»ä½•æ¨¡å—å‰ï¼Œå¿…é¡»æŸ¥é˜…æœ¬æ¡£æ¡ˆä»¥ç¡®è®¤æ¨¡å—èŒè´£è¾¹ç•Œã€‚**ä¸¥ç¦åœ¨æ ¸å¿ƒå¼•æ“ä¸­è¿›è¡Œé’ˆå¯¹ç‰¹å®šç»„ä»¶çš„ if/else ç¡¬ç¼–ç ã€‚** æ‰€æœ‰æ–°èƒ½åŠ›ã€æ–°ä¾›åº”å•†ã€æ–°æ¨¡å‹å¿…é¡»é€šè¿‡ `registry.py` ä»¥æ’ä»¶å½¢å¼åŠ¨æ€æŒ‚è½½ã€‚

---

## ğŸ—ï¸ 1. ç³»ç»Ÿéª¨æ¶æ˜ å°„ (Architectural Topology)

Genesis ç³»ç»Ÿçš„ä»£ç ç‰©ç†åˆ†å¸ƒéµå¾ªä¸¥æ ¼çš„â€œ**æ ¸å¿ƒå¼•æ“é©±åŠ¨ + åŠ¨æ€æ’ä»¶æ‰©å±•**â€ç»“æ„ã€‚

### ğŸ§  ä¸»è½´æ ¸å¿ƒ (The Spine & Brain)
ç»å¯¹æ ¸å¿ƒçš„è¿è½¬é€»è¾‘ã€‚**åŸåˆ™ä¸Šç¦æ­¢éšæ„ä¿®æ”¹è¿™äº›æ–‡ä»¶ä¸­çš„ä¸šåŠ¡æµç¨‹ï¼Œå®ƒä»¬çš„èŒè´£ä»…é™äºæµè½¬å’Œè°ƒåº¦**ã€‚
*   `nanogenesis/genesis/agent.py` - **è®¤çŸ¥ä¸»æ§åˆ¶å™¨ (Agent Orchestrator)**ï¼šç³»ç»Ÿçš„æ€»å…¥å£ï¼Œè´Ÿè´£ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç­–ç•¥è°ƒåº¦å’Œå®è§‚ä»»åŠ¡æµè½¬ã€‚
*   `nanogenesis/genesis/core/loop.py` - **è¡”å°¾è›‡æ‰§è¡Œé—¨ (Ouroboros Loop)**ï¼šçœŸæ­£æ‰§è¡Œå¾ªç¯çš„æ ¸å¿ƒã€‚å®ƒä» `agent` æ¥æ”¶ä»»åŠ¡ï¼Œé€šè¿‡ä¸å¤§æ¨¡å‹çš„äº¤äº’å’Œå·¥å…·çš„è°ƒç”¨ï¼Œå®Œæˆå…·ä½“çš„ Actionã€‚**æ­¤æ–‡ä»¶ä¸­å†…ç½®äº†ä¸¥æ ¼çš„ Schema æ¸…æ´—å™¨ (Sanitizer)ï¼Œç¦æ­¢ä»»ä½•ç»„ä»¶ç»•è¿‡å®ƒå‘é€ Tool Payloadï¼**
*   `nanogenesis/genesis/core/cognition.py` - **è®¤çŸ¥å¤„ç†å™¨**ï¼šç®¡ç†åæ€ã€ç­–ç•¥ç”Ÿæˆå’Œæ·±åº¦æ€è€ƒåè®® (`Polyhedron` ç­‰)ã€‚

### ğŸ’¡ æ’ä»¶åŒ–æ³¨å†Œéª¨å¹² (The Registry Backbone)
**è¿™æ˜¯è§£å†³è¯¯åˆ å’Œçº§è”å´©æºƒçš„ç»ˆææ–¹æ¡ˆã€‚** ç³»ç»Ÿä¸å†ä¾èµ–ç¡¬ç¼–ç æ¥åˆ¤æ–­åº”è¯¥è°ƒç”¨å“ªä¸ªç»„ä»¶ã€‚
*   `nanogenesis/genesis/core/registry.py` - **ä¸‡ç‰©æ³¨å†Œè¡¨**ï¼šå…¨å±€å•ä¾‹ã€‚ç®¡ç† `Provider`ã€`Tool`ã€`Skill` çš„æ³¨å†Œä¸å®ä¾‹åŒ–ã€‚
*   `nanogenesis/genesis/core/factory.py` - **åŠ¨æ€è£…é…è½¦é—´**ï¼šè¯»å–é…ç½®å¹¶ä¾æ® `registry.py` çš„æ¸…å•ï¼ŒåŠ¨æ€æ„å»ºå’Œæ‹‰èµ·æ‰€éœ€çš„ç³»ç»Ÿç»„ä»¶ã€‚

### ğŸ”Œ ä¾›åº”å•†ä¸ç®—åŠ› (Providers)
è´Ÿè´£ä¸å„å¤§ LLM å¯¹æ¥çš„é©±åŠ¨éš”ç¦»å±‚ã€‚
*   `nanogenesis/genesis/core/provider_manager.py` - **ä¾›åº”å•†è·¯ç”±ç½‘å…³**ï¼šè´Ÿè´£å¤„ç† API çš„è´Ÿè½½ã€é‡è¯•ä¸ Failoverã€‚
*   `nanogenesis/genesis/core/provider.py` - **äº‘ç«¯/é€šç”¨é©±åŠ¨**ã€‚
*   `nanogenesis/genesis/core/provider_local.py` - **æœ¬åœ°ç®—åŠ›é©±åŠ¨**ã€‚

### ğŸ› ï¸ å·¥å…·ä¸èº¯ä½“ (Tools & Skills)
*   `nanogenesis/genesis/tools/` - **åŸå­çº§åŸç”Ÿå·¥å…·**ï¼šå¦‚ `shell_tool.py`, `browser_tool.py`ã€‚
*   `nanogenesis/genesis/tools/spawn_sub_agent_tool.py` & `sub_agent_manager.py` - **å¼‚æ­¥å­ä»£ç†æ²™ç›’**ï¼šæ”¯æŒå°†é«˜å®¹é”™ã€é•¿è€—æ—¶ä»»åŠ¡å‰¥ç¦»ç»™ä¾¿å®œçš„è€—æ APIï¼ˆéš”ç¦»ä¸»è„‘ Token æ¶ˆè€—ï¼‰ã€‚
*   `nanogenesis/genesis/tools/skill_importer_tool.py` - **è·¨æ¡†æ¶æŠ€èƒ½åŒåŒ–å™¨**ï¼šè´Ÿè´£æ‹‰å–å¤–éƒ¨å¼€æº Agent è„šæœ¬ï¼ˆå¦‚ OpenClawï¼‰ï¼Œç»è¿‡å®‰å…¨å®¡è®¡åé‡å†™ä¸ºæœ¬åœ°åŸç”ŸæŠ€èƒ½ã€‚
*   `nanogenesis/genesis/tools/github_skill_search_tool.py` - **æ±‚ç”Ÿç›´è§‰ç½‘æ ¼**ï¼šå½“åŸç”Ÿå·¥å…·å¤±æ•ˆæ—¶ï¼Œèµ‹äºˆ Genesis å» Github è‡ªåŠ¨å¯»çŒå¯ç”¨ç»„ä»¶çš„åŸºç¡€å—…è§‰ã€‚
*   `nanogenesis/genesis/skills/` - **å¤åˆæŠ€èƒ½**ï¼šç”± Agent åŠ¨æ€å­¦ä¹ æˆ–é¢„åˆ¶çš„å¤æ‚æ“ä½œæµã€‚
*   `nanogenesis/genesis/core/sandbox.py` - **æ‰§è¡Œå®‰å…¨å±éšœ**ã€‚

### ğŸ§¬ é«˜é˜¶è®¤çŸ¥ä¸è¿›åŒ–ä½“ç³» (Intelligence & Evolution)
*   `nanogenesis/genesis/intelligence/adaptive_learner.py` - **æ½œæ„è¯†ç»„è£…ä¸è®¤çŸ¥æŠ˜å **ï¼šå¸æ”¶å­ä»£ç†å¸¦å›çš„ã€Šæ“ä½œå¤ç›˜ (Cognitive Insights)ã€‹ï¼Œé€šè¿‡æ¡æ‰‹åè®®ï¼ˆHandshake Protocolï¼‰ç¡®è®¤åï¼Œæ— ç¼èåˆè¿›ä¸»è„‘çš„ System Prompt ä¸­ï¼Œå®ç°æ°¸ä¹…åŸºå› å˜å¼‚ã€‚

### ğŸ’¾ è®°å¿†ã€æ„ŸçŸ¥ä¸ä¿¡å·å¤„ç† (Memory, Entropy & Signal)
*   `nanogenesis/genesis/core/context.py` - **çŸ­æœŸä¸Šä¸‹æ–‡ç¼“å†²**ï¼šç®¡ç†ä¸å½“å‰ä»»åŠ¡ç´§å¯†ç›¸å…³çš„ç³»ç»Ÿã€å†å²å’Œç”¨æˆ·æ¶ˆæ¯ã€‚
*   `nanogenesis/genesis/memory/` - **é•¿æœŸæŒä¹…åŒ–ä½“ç³»**ï¼šåŒ…å« SQLite ä¼šè¯ç®¡ç†å™¨åŠå‘é‡æ£€ç´¢ã€‚
*   `nanogenesis/genesis/core/entropy.py` - **ç³»ç»Ÿç†µå€¼ç›‘æ§**ï¼šé˜²æ­¢ç³»ç»Ÿé™·å…¥æ— é™æ­»å¾ªç¯çš„æ–­è·¯å™¨ã€‚æ¯æ¬¡æ–°å¯¹è¯å¼€å§‹æ—¶è‡ªåŠ¨ `reset()`ï¼Œé¿å…è·¨ä¼šè¯è¯¯è§¦å‘ stagnantã€‚
*   `nanogenesis/genesis/core/error_compressor.py` - **é”™è¯¯ä¿¡å·å‹ç¼©å™¨ (ErrorCompressor)**ï¼šå°†å·¥å…·æ‰§è¡Œäº§ç”Ÿçš„åŸå§‹é”™è¯¯ logï¼ˆå¯è¾¾ç™¾è¡Œï¼‰å‹ç¼©ä¸ºç»“æ„åŒ– JSON`{error_type, core_message, suggestion, raw_tail}`ï¼Œä¾› LLM é«˜æ•ˆè¯Šæ–­ã€‚æ”¯æŒ Python / pacman / systemd / shell å››ç§é”™è¯¯æºã€‚é›†æˆåœ¨ `loop.py` çš„ Failure Attribution èŠ‚ç‚¹ã€‚
*   `nanogenesis/genesis/core/prompt_filter.py` - **åŠ¨æ€ Prompt æ’åºå™¨ (ContextualPromptFilter)**ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å…³é”®è¯è¯†åˆ«ä»»åŠ¡ç±»å‹ï¼ˆcode / system / media / web / generalï¼‰ï¼Œå¯¹ system_prompt å„æ®µè½åš**æƒé‡é‡æ’åº**ï¼ˆåªæ’åºï¼Œä¸åˆ é™¤ï¼Œä¿¡æ¯å®Œæ•´æ€§ 100% ä¿ç•™ï¼‰ã€‚é›†æˆåœ¨ `agent.py` çš„ strategy_phase æ‰§è¡Œå…¥å£ã€‚
*   `nanogenesis/genesis/core/mission.py` - **ä»»åŠ¡ä¸Šä¸‹æ–‡æ ‘ (MissionManager)**ï¼šä»¥ SQLite ä¸ºæŒä¹…å±‚ï¼Œç»´æŠ¤å¸¦ `parent_id / depth / error_count` çš„å±‚çº§ä»»åŠ¡æ ‘ï¼ˆMission Context Treeï¼‰ã€‚**æ ¸å¿ƒè¡Œä¸º**ï¼šå½“ `STRATEGIC_INTERRUPT` è§¦å‘åï¼Œåœ¨ `agent.py` ä¸­è°ƒç”¨ `backtrack_to_parent()` å°†å¤±è´¥ä»»åŠ¡æ ‡è®°ï¼Œå¹¶é‡æ–°æ¿€æ´»çˆ¶èŠ‚ç‚¹ä»»åŠ¡ï¼ŒåŒæ—¶æ³¨å…¥ `[BACKTRACK CONTEXT]`ï¼ˆå·²å¤±è´¥è·¯å¾„åˆ—è¡¨ï¼‰åˆ° `current_input`ï¼Œè®©ä¸‹ä¸€è½® `strategy_phase` è‡ªåŠ¨æ’é™¤è¿™äº›è·¯å¾„ï¼Œå®ç°**ä¸»åŠ¨è‡ªæ„ˆè€Œéè¢«åŠ¨ä¸­æ–­**ã€‚æ ¹èŠ‚ç‚¹ä¸­æ–­æ—¶æ‰é€€åŒ–ä¸º AUTO-DEBRIEFã€‚

### ğŸŒ å¤–éƒ¨æ¥å£ (External Adapters)
*   `nanogenesis/qq_adapter.py` - **QQ Bot æ¥å…¥å±‚**ï¼šé€šè¿‡ `botpy` SDK æ¥å…¥ QQ å¼€æ”¾å¹³å°ï¼Œæ”¯æŒé¢‘é“ @æ¶ˆæ¯ / ç§ä¿¡ / ç¾¤æ¶ˆæ¯ä¸‰ç§ç±»å‹è·¯ç”±è‡³ Genesis å¤„ç†ã€‚å•ä¾‹ Agent æ¨¡å¼ï¼Œ`on_ready` æ—¶å¼‚æ­¥é¢„çƒ­ï¼ˆ180s è¶…æ—¶ï¼‰ï¼Œç”±äºå®ƒæœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯ï¼Œé€šå¸¸ä½œä¸ºé•¿é©»å®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemonï¼‰è¿è¡Œã€‚

---

## ğŸš« 2. æ ¸å¿ƒå¼€å‘å¥‘çº¦ (Development Constraints)

å¦‚æœä½ ï¼ˆæœªæ¥çš„ AI åŠ©ç†ï¼‰éœ€è¦ä¸º Genesis æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œ**å¿…é¡»** éµå®ˆä»¥ä¸‹æ³•åˆ™ï¼š

1.  **ç¦æ­¢åœ¨ä¸»å¾ªç¯ä¸­åšåˆ¤æ–­**ï¼šå¦‚æœä½ è¦å¢åŠ å¯¹æŸä¸ªæ–° AI æ¨¡å‹ï¼ˆå¦‚ Claude 3.5ï¼‰çš„æ”¯æŒï¼Œ**ç»ä¸** å…è®¸ä¿®æ”¹ `provider_manager.py` ä¸­çš„ `if model == "..."`ã€‚ä½ å¿…é¡»åœ¨ `provider.py` ä¸­æ–°å»ºä¸€ä¸ªå®ç°äº†æ ‡å‡† `Provider` æ¥å£çš„ç±»ï¼Œå¹¶é€šè¿‡ `@registry.register` æ³¨å…¥å®ƒã€‚
2.  **Schema çº¯æ´æ³•**ï¼šä»»ä½•éœ€è¦å‘ LLM API å‘é€çš„æ•°æ®ï¼Œå¿…é¡»è¢«æŠ½è±¡ä¸ºæ ‡å‡† `Message` å¯¹è±¡æ•°ç»„ã€‚æ¶‰åŠ Tool Calls æ—¶ï¼Œå¿…é¡»éµå¾ª `[User] -> [Assistant (with tool_calls)] -> [Tool (or User observation)]` çš„é“å¾‹ã€‚**ç¦æ­¢åœ¨ `agent.py` çš„ä»»ä½•åˆ†æ”¯ä¸­ç»•è¿‡æ¸…æ´—é€»è¾‘ç›´å‘ Payloadã€‚**
3.  **é…ç½®ç‰©ç†éš”ç¦»**ï¼šæ‰€æœ‰çš„å¸¸æ•°ï¼ˆMax Iterations, Timeouts, Default Modelsï¼‰å¿…é¡»è¢«æŠ½å–åˆ°é…ç½®æ–‡ä»¶ï¼ˆå¦‚ `.env`ï¼‰æˆ–äº¤ç”± `core/config.py` æ”¶å£ã€‚ä»£ç ä¸­ä¸¥ç¦å‡ºç°è£¸éœ²çš„ç¡¬ç¼–ç æ•°å€¼å’Œ API Keysã€‚
4.  **åŸå­éš”ç¦»æµ‹è¯•**ï¼šä»»ä½•å¯¹åº•å±‚çš„ä¿®æ”¹ï¼ˆç‰¹åˆ«æ˜¯æ¶‰åŠ `core/` ä¸‹çš„é€»è¾‘ç»“æ„å˜åŠ¨ï¼‰ï¼Œåœ¨å®Œæˆä»£ç ç¼–å†™åï¼Œå¿…é¡»ä¸»åŠ¨æ‰§è¡Œå¯¹åº”çš„å•å…ƒæˆ–å›å½’å‹æµ‹è„šæœ¬ï¼ˆä¾‹å¦‚ `scripts/stress_test_full.py`ï¼‰ï¼Œé€šè¿‡åæ–¹å¯å£°æ˜ä»»åŠ¡å®Œæˆã€‚

---


> ä¿®æ”¹æ—¶é—´æˆ³: 2026-02-23
> éªŒè¯ç­¾å: Genesis Registry Protocol V1.0

